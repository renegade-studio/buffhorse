{
  "description": "Template configuration for this project. See https://www.codebuff.com/config for all options.",
  "startupProcesses": [
    {
      "name": "drizzle",
      "command": "bun start-studio",
      "stdoutFile": "debug/drizzle.log"
    },
    {
      "name": "web-server",
      "command": "bun start-web",
      "stdoutFile": "debug/web.log"
    }
  ],
  "fileChangeHooks": [
    {
      "name": "backend-unit-tests",
      "command": "../scripts/run-tests-summary",
      "cwd": "backend",
      "filePattern": "backend/**/*.ts"
    },
    {
      "name": "backend-typecheck",
      "command": "bun run typecheck",
      "cwd": "backend",
      "filePattern": "backend/**/*.ts"
    },
    {
      "name": "npm-app-unit-tests",
      "command": "../scripts/run-tests-summary",
      "cwd": "npm-app",
      "filePattern": "npm-app/**/*.ts"
    },
    {
      "name": "npm-typecheck",
      "command": "bun run typecheck",
      "cwd": "npm-app",
      "filePattern": "npm-app/**/*.ts"
    },
    {
      "name": "web-typecheck",
      "command": "bun run typecheck",
      "cwd": "web",
      "filePattern": "web/**/*.ts*"
    },
    {
      "name": "common-unit-tests",
      "command": "../scripts/run-tests-summary",
      "cwd": "common",
      "filePattern": "common/**/*.ts"
    },
    {
      "name": "common-typecheck",
      "command": "bun run typecheck",
      "cwd": "common",
      "filePattern": "common/**/*.ts"
    },
    {
      "name": "prettier-format",
      "command": "set -o pipefail && CHANGED=\"$(git diff --name-only --diff-filter=ACMR | grep -E '\\.(ts|tsx|json|md)$' | xargs -r npx prettier --list-different || true)\"; [ -n \"$CHANGED\" ] && echo \"$CHANGED\" | xargs -r npx prettier --write --log-level=warn && printf '%s\\n' \"$CHANGED\" || true",
      "filePattern": "**/*.{ts,tsx,json,md}"
    },
    {
      "name": "regenerate-tool-definitions",
      "command": "bun run generate-tool-definitions",
      "filePattern": "common/src/tools/{params/tool/*.ts,list.ts}"
    },
    {
      "name": "agents-typecheck",
      "command": "bun run typecheck",
      "cwd": ".agents",
      "filePattern": ".agents/**/*.ts"
    },
    {
      "name": "eslint-fix-imports",
      "command": "set -o pipefail && git diff --name-only --diff-filter=ACMR | grep -E '\\.(ts|tsx|js|jsx)$' | xargs -r npx eslint --fix --quiet",
      "filePattern": "**/*.{ts,tsx,js,jsx}"
    }
  ],
  "maxAgentSteps": 100
}
